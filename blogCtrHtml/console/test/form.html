<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="../extjs/resources/css/ext-all.css">
    <!--<script type="text/javascript" src="../../extjs/bootstrap.js" ></script>-->
    <script src="../extjs/ext-all.js"></script>
    <script type="text/javascript" src="../extjs/ext-lang-zh_CN.js"></script>

    <script>
        var formPanel = Ext.create("Ext.form.FormPanel", {
            labelAlign: 'right',
            labelWidth: 50,
            frame: true,
            defaultType: 'textfield',
            items: [
                {
                    fieldLabel: '用户名',
                    name: 'userName',
                    allowBlank: false
                },
                {
                    fieldLabel: '密  码',
                    name: 'password',
                    inputType: 'password',
                    allowBlank: false
                }
            ]
        });

        Ext.onReady(function () {
            var win = new Ext.Window({
                alias: 'widget.loginView',
                title: '后台管理系统',
                autoShow: true,
                layout: 'fit',
                // width:500,
                autoWidth: true,
                hehight: 300,
                closeAction: 'hide',
                items: [formPanel],
                buttons: [
                    {
                        text: '登录',
                        handler: function(){
                            var form = formPanel.getForm();
                            if(form.isValid()){
                                form.submit({
                                    url: 'file-upload.php',
                                    waitMsg: '正在提交...',
                                    success: function(fp, o) {
                                        msg('Success', tpl.apply(o.result));
                                    },
                                    // success: function(form, action) {
                                    //     Ext.Msg.alert('Success', action.result.msg);
                                    // },
                                    failure: function(form, action) {
                                        var status = action.response.status;
                                        var statusText = action.response.statusText;
                                        Ext.Msg.alert('失败', status + " " + statusText);
                                    }
                                });
                            }
                        }
                    },
                    {
                        text: '重置',
                        handler: function(btn) {
                            formPanel.getForm().reset();
                        }
                    }
                ]
            });

            // Ext.define("MyApp.view.Viewport", {
            //     extend: "Ext.container.Viewport",
            //     layout: "fit",
            //     items: [{
            //         xtype: 'loginView'
            //     }]
            // });

        });


    </script>
</head>
<body>

</body>
</html>